<div
  class="hero bg-gradient-to-br from-base-200 via-base-100 to-base-200 shadow-lg mb-12 py-16"
  style="margin-left: calc(-50vw + 50%); margin-right: calc(-50vw + 50%); width: 100vw"
>
  <div class="hero-content text-center w-full px-4">
    <div class="max-w-4xl w-full mx-auto">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-4">
        Formularz Kontaktowy dla Twojej Strony
      </h1>
      <p class="text-lg sm:text-xl mb-6">Otrzymuj wiadomości od klientów prosto na email</p>
      <div class="flex gap-2 justify-center flex-wrap">
        <span class="badge badge-lg badge-primary">Szybka instalacja</span>
        <span class="badge badge-lg badge-primary">Bezpieczne</span>
        <span class="badge badge-lg badge-primary">Przejrzyste</span>
      </div>
    </div>
  </div>
</div>

<div class="px-4 md:px-8">
  <h2 class="text-3xl font-bold mb-6">Jak to działa?</h2>

  <div class="space-y-8">
    <div>
      <h3 class="text-xl font-semibold mb-3">1. Wygeneruj unikalny identyfikator (UUID)</h3>
      <div class="flex gap-2 my-4 flex-wrap">
        <button onclick="generateUUID()" class="btn btn-primary">Wygeneruj</button>
        <input
          type="text"
          id="uuid-output"
          readonly
          class="input input-bordered flex-1 min-w-[250px]"
          placeholder="Wygeneruj UUID formularza"
        />
      </div>
    </div>

    <div>
      <h3 class="text-xl font-semibold mb-3">2. Dodaj formularz do swojej strony</h3>
      <p class="mb-4">Skopiuj poniższy kod HTML i wklej na swoją stronę:</p>

      <div class="mockup-code w-full" style="position: relative; padding-bottom: 3rem">
        <pre><code id="code-snippet"><span class="text-gray-400">&lt;</span><span class="text-purple-400">form</span> <span class="text-sky-400">action</span><span class="text-gray-400">=</span><span class="text-green-400">"https://mail.selfhosting.pl/submit/<span id="uuid-in-code">TWOJ-UUID</span>"</span> <span class="text-sky-400">method</span><span class="text-gray-400">=</span><span class="text-green-400">"POST"</span><span class="text-gray-400">&gt;</span>
  <span class="text-gray-400">&lt;</span><span class="text-purple-400">label</span> <span class="text-sky-400">for</span><span class="text-gray-400">=</span><span class="text-green-400">"email"</span><span class="text-gray-400">&gt;</span>Twój email:<span class="text-gray-400">&lt;/</span><span class="text-purple-400">label</span><span class="text-gray-400">&gt;</span>
  <span class="text-gray-400">&lt;</span><span class="text-purple-400">input</span> <span class="text-sky-400">type</span><span class="text-gray-400">=</span><span class="text-green-400">"email"</span> <span class="text-sky-400">id</span><span class="text-gray-400">=</span><span class="text-green-400">"email"</span> <span class="text-sky-400">name</span><span class="text-gray-400">=</span><span class="text-green-400">"email"</span> <span class="text-sky-400">required</span><span class="text-gray-400">&gt;</span>

  <span class="text-gray-400">&lt;</span><span class="text-purple-400">label</span> <span class="text-sky-400">for</span><span class="text-gray-400">=</span><span class="text-green-400">"message"</span><span class="text-gray-400">&gt;</span>Wiadomość:<span class="text-gray-400">&lt;/</span><span class="text-purple-400">label</span><span class="text-gray-400">&gt;</span>
  <span class="text-gray-400">&lt;</span><span class="text-purple-400">textarea</span> <span class="text-sky-400">id</span><span class="text-gray-400">=</span><span class="text-green-400">"message"</span> <span class="text-sky-400">name</span><span class="text-gray-400">=</span><span class="text-green-400">"message"</span> <span class="text-sky-400">required</span><span class="text-gray-400">&gt;&lt;/</span><span class="text-purple-400">textarea</span><span class="text-gray-400">&gt;</span>

  <span class="text-gray-400">&lt;</span><span class="text-purple-400">button</span> <span class="text-sky-400">type</span><span class="text-gray-400">=</span><span class="text-green-400">"submit"</span><span class="text-gray-400">&gt;</span>Wyślij<span class="text-gray-400">&lt;/</span><span class="text-purple-400">button</span><span class="text-gray-400">&gt;</span>
  <span class="text-gray-400">&lt;/</span><span class="text-purple-400">form</span><span class="text-gray-400">&gt;</span></code></pre>
        <button
          id="copy-code-btn"
          onclick="copyCodeSnippet()"
          class="btn btn-sm btn-primary"
          style="position: absolute; bottom: 0.75rem; right: 0.75rem; display: none"
        >
          Kopiuj formularz
        </button>
      </div>
      <p class="text-sm mt-2">
        Nie wiesz jak to zrobić?
        <label for="tutorial-modal" class="link link-primary cursor-pointer">Zobacz tutorial</label>
      </p>
    </div>

    <div>
      <h3 class="text-xl font-semibold mb-3">3. Przy pierwszym użyciu aktywuj usługę</h3>
      <p>
        Gdy wyślesz pierwszą wiadomość przez formularz, zostaniesz przekierowany do strony
        aktywacji. Podasz swój adres e-mail (na który będą przychodzić wiadomości) i opłacisz
        subskrypcję.
      </p>
    </div>

    <div>
      <h3 class="text-xl font-semibold mb-3">4. Gotowe!</h3>
      <p>Od teraz wszystkie wiadomości z formularza trafiają bezpośrednio na Twój adres e-mail.</p>
    </div>
  </div>

  <script>
    // Google Ads conversion tracking
    function gtag_report_conversion(url) {
      var callback = function () {
        if (typeof url != "undefined") {
          window.location = url;
        }
      };
      gtag("event", "conversion", {
        send_to: "AW-17786596642/-nlZCMTWn88bEKLap6FC",
        transaction_id: "",
        event_callback: callback,
      });
      return false;
    }

    function generateUUID() {
      const uuid = crypto.randomUUID();
      document.getElementById("uuid-output").value = uuid;

      // Aktualizuj UUID w kodzie (używamy getElementById dla konkretnego spana)
      const uuidInCode = document.getElementById("uuid-in-code");
      if (uuidInCode) {
        uuidInCode.textContent = uuid;
      }

      // Pokaż przycisk "Kopiuj"
      const copyBtn = document.getElementById("copy-code-btn");
      if (copyBtn) {
        copyBtn.style.display = "inline-block";
      }
    }

    function copyCodeSnippet() {
      const uuid = document.getElementById("uuid-output").value;

      // Utwórz stylizowaną wersję formularza z inline CSS
      const formCode = `<form action="https://mail.selfhosting.pl/submit/${uuid}" method="POST"
  style="max-width:420px;margin:0 auto;font-family:Arial, sans-serif;line-height:1.4;font-weight:400;">

  <label for="email" style="display:block;margin-bottom:4px;font-weight:500;">
    Twój email:
  </label>
  <input type="email" id="email" name="email" required
    style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;margin-bottom:12px;font-weight:400;">

  <label for="message" style="display:block;margin-bottom:4px;font-weight:500;">
    Wiadomość:
  </label>
  <textarea id="message" name="message" required rows="4"
    style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;margin-bottom:16px;resize:vertical;font-weight:400;"></textarea>

  <button type="submit"
    style="width:100%;padding:10px 0;background:#0055ff;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;">
    Wyślij
  </button>

</form>`;

      // Skopiuj do schowka używając Clipboard API
      navigator.clipboard
        .writeText(formCode)
        .then(() => {
          // Śledzenie konwersji Google Ads
          gtag_report_conversion();

          // Zmień tekst przycisku na feedback
          const btn = document.getElementById("copy-code-btn");
          const originalText = btn.textContent;
          btn.textContent = "Skopiowano!";
          btn.classList.remove("btn-primary");
          btn.classList.add("btn-success");

          // Przywróć oryginalny tekst po 2 sekundach
          setTimeout(() => {
            btn.textContent = originalText;
            btn.classList.remove("btn-success");
            btn.classList.add("btn-primary");
          }, 2000);
        })
        .catch((err) => {
          // Fallback dla starszych przeglądarek
          alert("Nie udało się skopiować kodu. Zaznacz i skopiuj manualnie.");
        });
    }
  </script>

  <div class="divider my-12"></div>

  <h2 class="text-3xl font-bold mb-6">Zobacz w akcji</h2>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12 items-center">
    <!-- Lewa kolumna - checkmarki -->
    <div class="space-y-4">
      <div class="flex items-start gap-3">
        <svg
          class="w-6 h-6 text-success mt-1 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          ></path>
        </svg>
        <p class="text-lg">Nie potrzebujesz serwera</p>
      </div>

      <div class="flex items-start gap-3">
        <svg
          class="w-6 h-6 text-success mt-1 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          ></path>
        </svg>
        <p class="text-lg">Nie potrzebujesz bazy danych</p>
      </div>

      <div class="flex items-start gap-3">
        <svg
          class="w-6 h-6 text-success mt-1 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          ></path>
        </svg>
        <p class="text-lg">Nie musisz uczyć się API ani frameworków</p>
      </div>

      <div class="flex items-start gap-3">
        <svg
          class="w-6 h-6 text-success mt-1 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          ></path>
        </svg>
        <p class="text-lg">Idealny dla statycznych stron</p>
      </div>
    </div>

    <!-- Prawa kolumna - działający formularz -->
    <div class="card bg-base-200 shadow-lg">
      <div class="card-body">
        <form
          action="https://mail.selfhosting.pl/submit/a5ef6f80-9325-4ed1-af5a-1c758971feb1"
          method="POST"
          class="space-y-4"
        >
          <div class="form-control">
            <label class="label" for="demo-email">
              <span class="label-text">Email</span>
            </label>
            <input
              type="email"
              id="demo-email"
              name="email"
              placeholder="twoj@email.com"
              class="input input-bordered w-full"
              required
            />
          </div>

          <div class="form-control">
            <label class="label" for="demo-message">
              <span class="label-text">Wiadomość</span>
            </label>
            <textarea
              id="demo-message"
              name="message"
              placeholder="Twoja wiadomość..."
              class="textarea textarea-bordered w-full h-24"
              required
            ></textarea>
          </div>

          <button type="submit" class="btn btn-primary w-full">Wyślij</button>
        </form>
      </div>
    </div>
  </div>

  <div class="divider my-12"></div>

  <div class="hero bg-gradient-to-br from-primary/10 to-primary/5 rounded-lg py-12 mb-12">
    <div class="hero-content text-center">
      <div class="max-w-2xl">
        <h2 class="text-3xl font-bold mb-4">Skopiuj i wklej</h2>
        <p class="text-xl mb-6">Nie trać klientów. Ułatw im kontakt.</p>
        <a
          href="#"
          onclick="
            document.querySelector('button[onclick=\'generateUUID()\']').click();
            document
              .querySelector('button[onclick=\'generateUUID()\']')
              .scrollIntoView({ behavior: 'smooth', block: 'center' });
            return false;
          "
          class="btn btn-primary btn-lg"
        >
          Wygeneruj swój formularz
        </a>
      </div>
    </div>
  </div>

  <div class="card bg-stripe-light border border-stripe-blue/20 mb-8">
    <div class="card-body">
      <h3 class="card-title text-xl">Bezpieczeństwo i prywatność</h3>
      <p>
        Twoje dane są bezpieczne. Wiadomości od użytkowników nie są przechowywane w naszej bazie -
        przetwarzamy je wyłącznie w celu przekazania na Twój adres e-mail.
      </p>
      <p>
        Płatności obsługuje bezpieczny system Stripe. Dane kart nie są przechowywane na naszych
        serwerach.
      </p>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
    <div class="card bg-base-200">
      <div class="card-body">
        <h3 class="card-title">Zarządzanie subskrypcją</h3>
        <p>
          Masz pełną kontrolę nad swoją subskrypcją. W każdej chwili możesz ją anulować przez panel
          zarządzania Stripe.
        </p>
        <div class="card-actions justify-end mt-2">
          <a href="/customer-portal" class="btn btn-primary btn-sm">Zarządzaj subskrypcją</a>
        </div>
      </div>
    </div>

    <div class="card bg-base-200">
      <div class="card-body">
        <h3 class="card-title">Dokumenty</h3>
        <p>
          Zapoznaj się z naszymi dokumentami, aby dowiedzieć się więcej o warunkach świadczenia
          usługi.
        </p>
        <div class="card-actions justify-end mt-2">
          <a href="/regulamin" class="btn btn-outline btn-sm">Regulamin</a>
          <a href="/polityka-prywatnosci" class="btn btn-outline btn-sm">Polityka</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://mail.selfhosting.pl/#website",
        "url": "https://mail.selfhosting.pl",
        "name": "mail.selfhosting.pl",
        "description": "Prosty serwis do obsługi formularzy kontaktowych",
        "publisher": {
          "@id": "https://mail.selfhosting.pl/#organization"
        }
      },
      {
        "@type": "Organization",
        "@id": "https://mail.selfhosting.pl/#organization",
        "name": "mail.selfhosting.pl",
        "url": "https://mail.selfhosting.pl",
        "email": "kacpermachay@gmail.com",
        "description": "Serwis do obsługi formularzy kontaktowych dla statycznych stron internetowych"
      },
      {
        "@type": "SoftwareApplication",
        "name": "mail.selfhosting.pl",
        "applicationCategory": "WebApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "PLN",
          "description": "Miesięczna subskrypcja"
        },
        "description": "Prosty formularz kontaktowy dla Twojej strony internetowej. Szybka instalacja, bezpieczne, przejrzyste.",
        "featureList": [
          "Szybka instalacja",
          "Bezpieczne szyfrowanie",
          "Wiadomości na email",
          "Przejrzyste zasady"
        ]
      }
    ]
  }
</script>

<!-- Tutorial Modal -->
<input type="checkbox" id="tutorial-modal" class="modal-toggle" />
<div class="modal">
  <div class="modal-box max-w-4xl">
    <h3 class="font-bold text-lg mb-4">Jak dodać formularz na swoją stronę?</h3>
    <div class="aspect-video">
      <iframe
        width="100%"
        height="100%"
        src="https://www.youtube.com/embed/8jgDixEjEro?si=l3YD2Pxko1O4V47Z"
        title="Tutorial"
        frameborder="0"
        allow="
          accelerometer;
          autoplay;
          clipboard-write;
          encrypted-media;
          gyroscope;
          picture-in-picture;
        "
        allowfullscreen
      ></iframe>
    </div>
    <div class="modal-action">
      <label for="tutorial-modal" class="btn">Zamknij</label>
    </div>
  </div>
  <label class="modal-backdrop" for="tutorial-modal"></label>
</div>

{{template "partials/footer" .}}
